<img src="C:\Users\86150\AppData\Roaming\Typora\typora-user-images\image-20240613171038077.png" alt="image-20240613171038077" style="zoom:67%;" />



<center><strong>
    <span  style="font-size: 35px">Texture Packing</span>   
</strong></center>















<center>Date: 2024-12-1
</center>
<div style="page-break-after: always;"></div>

<strong>
    <span  style="font-size: 30px">目录</span>   </strong>

[TOC]

<div style="page-break-after: always;"></div>

# Chapter 1: Introduction

​	本项目研究的主题是`Textur Packing`。Texture Packing 问题是一类矩形装箱问题，常用于计算机图形学和游戏开发领域。其目标是将多个矩形形状的纹理 (texture) 紧密地打包到一个更大的矩形纹理中。具体来说，题目要求如下：

1. **输入**：若干矩形纹理，每个纹理有固定的宽度和高度。

2. **输出**：一个大的矩形纹理，其宽度固定，要求设计一种方法尽量减少所需的高度。

3. **限制条件**：大矩形纹理的宽度是给定的，最终纹理必须尽可能紧凑。



​	由于题目没有明确给出输入输出，在此介绍我们项目当中期望的输入输出格式：

### Input Specification(example)

```pseudocode
10 
5
4 3
3 2
6 5
5 3
7 1
```

> 首先读取的两个整型数字分别是大纹理（容器）的最大宽度以及小纹理（小矩形）的个数`n`；
>
> 接着为`n`行的小矩形数据，宽x高的格式依次输入。



### Output Specification(example)

```pseudocode
...
--------------------conclusion---------------------
- Approximation Ratio for ceiling_height packing: 128.5714%
- Final height dealing with 5 rectangles by ceiling_height packing algorithm: 9
```

> 1. `...`表示的是依次插入小矩形的过程信息；
> 2. 最后分别输出`Approximation Ratio`与最终高度。其中`Approximation Ratio`采用算法得到的最终高度/最优解法的理想高度`optimal_height`, 后者通过`area_sum/container_width`得到，即将所有的矩形面积除以容器宽度。



<div style="page-break-after: always;"></div>



# Chapter 2: **Data Structure / Algorithm Specification**

## 2.1 结构体介绍

### 2.1.1 Texture 

```c
typedef struct {
    int width;
    int height;
} Rectangle;

// BST node structure
typedef struct TreeNode {
    Rectangle rect;
    struct TreeNode *left;
    struct TreeNode *right;
} TreeNode;
```

1. 为了表示存储单个`Texture`(下称小矩形)，我们定义结构体`Rectangle`，其内部属性分别为整形的宽与高；

2. 然后，我们将小矩形作为`BST`的节点根据属性`width`构造二叉树，方便后续根据宽度快速寻找符合条件的小矩形；



### 2.1.2 ceiling_height

```c
#define MAX_WIDTH 1000
int ceiling_height[MAX_WIDTH];
```

​	`ceiling_height`记录容器单位宽度的各个最高高度。换言之，将大矩形容器内部的小矩形存放结果的最高值取出，各个单位宽度上的最高值作为`ceiling_height`的数组元素。

- ##### 相关操作

  - 每次搜索当前最低高度的连续宽度`consist_width`;
  - 在BST当中选择合适的小矩形插入到当前的位置，同时更新`ceiling_height`数组；
  - 如果在第二步当中无法找到适合的小矩形，将该`consist_width`宽度设置为相邻区域的较小高度（表示弃用），然后继续搜索。

> 具体实现在`2.2`中给出。





